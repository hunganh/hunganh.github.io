/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/fields.js":
/*!**************************!*\
  !*** ./src/js/fields.js ***!
  \**************************/
/***/ (() => {

eval("window.fieldsJS = {\r\n    loadFieldsData : function () {\r\n        window.variablesJS.sortFieldDefault = \"changePercent1D\";\r\n        var loadingHTML = window.commonJS.getLoadingHTML();\r\n        $(\"#showFieldsData\").html(`</br>${loadingHTML}`);\r\n        setTimeout(() => {\r\n            var URL = encodeURIComponent(`${window.apiUrlDefined.FIALDA_API_V1_URL}${window.apiUrlDefined.FIALDA_GET_FIELDS_REPORT_PATH}`);\r\n            var res = window.variablesJS.headFields;\r\n            $.ajax({\r\n                url: `${window.apiUrlDefined.CORS_PROXY_URL}/${URL}`,\r\n                async: false,\r\n                dataType: \"json\"\r\n            }).done(function (response) {\r\n                if (response && response.result) {\r\n                    window.variablesJS.fieldsDataJson = response;\r\n                    res += window.fieldsJS.processFieldsDataInput(\"changePercent1D\", \"desc\");\r\n                } else {\r\n                    res += `<tr><td colspan=\"12\">Không có dữ liệu. Vui lòng thử lại sau!</td></tr>`;\r\n                }\r\n                res += `</tbody></table>`;\r\n                $(\"#showFieldsData\").html(res);\r\n                window.commonJS.initTooltips();\r\n            }).fail(function (jqXHR, textStatus, error) {\r\n                $(\"#showFieldsData\").html(\"Có lỗi khi tải dữ liệu. Vui lòng thử lại sau!\");\r\n            });\r\n        }, 100);\r\n    },\r\n    \r\n    processFieldsDataInput : function (sortField, sortType) {\r\n        window.variablesJS.sortFieldDefault = sortField;\r\n        var res = \"\";\r\n        if (window.variablesJS.fieldsDataJson) {\r\n            window.variablesJS.fieldsDataJson.result.sort(function (a, b) {\r\n                var c = a[sortField] !== null ? a[sortField] : 0;\r\n                var d = b[sortField] !== null ? b[sortField] : 0;\r\n                if (sortType === \"desc\") {\r\n                    return d - c;\r\n                }\r\n                return c-d;\r\n            });\r\n            window.variablesJS.fieldsDataJson.result.forEach(item => {\r\n                var eps = $.isNumeric(item.eps_ttm) ? new Intl.NumberFormat(window.variablesJS.numberLocale).format((item.eps_ttm).toFixed(0)) : \"N/A\";\r\n                var pe = $.isNumeric(item.pe) ? (item.pe).toFixed(2) : \"N/A\";\r\n                var ps = $.isNumeric(item.ps) ? (item.ps).toFixed(2) : \"N/A\";\r\n                var pb = $.isNumeric(item.pb) ? (item.pb).toFixed(2) : \"N/A\";\r\n                var roa = $.isNumeric(item.mE_ROA) ? `${(item.mE_ROA * 100).toFixed(2)}%` : \"N/A\";\r\n                var roe = $.isNumeric(item.mE_ROE) ? `${(item.mE_ROE * 100).toFixed(2)}%` : \"N/A\";\r\n                var day = $.isNumeric(item.changePercent1D) ? (item.changePercent1D * 100).toFixed(2) : \"0\";\r\n                var week = $.isNumeric(item.changePercent1W) ? (item.changePercent1W * 100).toFixed(2) : \"N/A\";\r\n                var month_1 = $.isNumeric(item.changePercent1M) ? (item.changePercent1M * 100).toFixed(2) : \"N/A\";\r\n                var month_3 = $.isNumeric(item.changePercent3M) ? (item.changePercent3M * 100).toFixed(2) : \"N/A\";\r\n                var month_6 = $.isNumeric(item.changePercent6M) ? (item.changePercent6M * 100).toFixed(2) : \"N/A\";\r\n                var year = $.isNumeric(item.changePercent1Y) ? (item.changePercent1Y * 100).toFixed(2) : \"N/A\";\r\n                var ytd = $.isNumeric(item.changePercentYTD) ? (item.changePercentYTD * 100).toFixed(2) : \"N/A\";\r\n                res += `<tr class=\"tr-cursor\" action=\"collapsed\" onclick=\"window.fieldsJS.showDetailField('${item.icbName}', '${item.icbCode}', this)\">\r\n                            <td class=\"text-left filter-sort\"><b class=\"top10\">${item.icbName}</b> &nbsp; <span class=\"sort arrow-right\"></span></td>\r\n                            <td class=\"top10\">${eps}</td>\r\n                            <td class=\"top10\">${pe}</td>\r\n                            <td class=\"top10\">${ps}</td>\r\n                            <td class=\"top10\">${pb}</td>\r\n                            <td class=\"top10\">${roa}</td>\r\n                            <td class=\"top10\">${roe}</td>\r\n                            <td class=\"${day > 0 ? 'up' : day < 0 ? 'down' : 'reference'} bold\">${day}%</td>\r\n                            <td class=\"${week > 0 ? 'up' : week < 0 ? 'down' : 'reference'} bold\">${week}%</td>\r\n                            <td class=\"${month_1 > 0 ? 'up' : month_1 < 0 ? 'down' : 'reference'} bold\">${month_1}%</td>\r\n                            <td class=\"${month_3 > 0 ? 'up' : month_3 < 0 ? 'down' : 'reference'} bold\">${month_3}%</td>\r\n                            <td class=\"${month_6 > 0 ? 'up' : month_6 < 0 ? 'down' : 'reference'} bold\">${month_6}%</td>\r\n                            <td class=\"${year > 0 ? 'up' : year < 0 ? 'down' : 'reference'} bold\">${year}%</td>\r\n                            <td class=\"${ytd > 0 ? 'up' : ytd < 0 ? 'down' : 'reference'} bold\">${ytd}%</td>\r\n                        </tr>`;\r\n            });\r\n        } else {\r\n            res += `<tr><td colspan=\"12\">Không có dữ liệu. Vui lòng thử lại sau!</td></tr>`;\r\n        }\r\n        return res;\r\n    },\r\n    \r\n    refreshFieldsData : function () {\r\n        window.fieldsJS.loadFieldsData();\r\n    },\r\n    \r\n    sortTable : function (time, self) {\r\n        window.variablesJS.sortFieldType = \"desc\";\r\n        var childSpan = $(self).find(\"span\");\r\n        if (childSpan.hasClass(\"desc\")) {\r\n            window.variablesJS.sortFieldType = \"asc\";\r\n        }\r\n    \r\n        var res = window.variablesJS.headFields;\r\n        res += window.fieldsJS.processFieldsDataInput(time, window.variablesJS.sortFieldType);\r\n        res += `</tbody></table>`;\r\n        $(\"#showFieldsData\").html(res);\r\n        window.commonJS.initTooltips();\r\n        window.fieldsJS.removeAllSortClass();\r\n        $(\"#\" + time).addClass(window.variablesJS.sortFieldType);\r\n    },\r\n    \r\n    removeAllSortClass : function () {\r\n         $(\"span.sort\").removeClass(\"desc\");\r\n         $(\"span.sort\").removeClass(\"asc\");\r\n    },\r\n    \r\n    showDetailField : function (icbName, icbCode, self) {\r\n        var contents = `<tr class=\"append-field-data\"><td colspan=\"14\">${window.commonJS.getLoadingHTML()}</td></tr>`;\r\n        var action = $(self).attr(\"action\");\r\n        var tdFirstChild = $(self).find(\"td:eq(0) span\");\r\n        $(\".append-field-data\").remove();\r\n        window.fieldsJS.resetFieldExpendIcon();\r\n        $(self).after(contents);\r\n        if (action === \"collapsed\") {\r\n            tdFirstChild.removeClass(\"arrow-right\");\r\n            tdFirstChild.addClass(\"desc\");\r\n            $(self).attr(\"action\", \"expanded\");\r\n            var symbols = window.stockData.filter(x => x.icbCode === icbCode);\r\n            // get realtime data\r\n            var body = symbols.map(x => { let obj = {}; obj[\"symbol\"] = x.symbol; return obj });\r\n            $.ajax({\r\n                url: `${window.apiUrlDefined.STOCK_INFOR_DATA_OF_FIELD_URL}`,\r\n                method: \"POST\",\r\n                data: JSON.stringify(body),\r\n                headers: {\r\n                    \"content-type\": \"application/json;charset=UTF-8\"\r\n                }\r\n            }).done(function (response) {\r\n                if (response && response.length > 0) {\r\n                    response =  response.sort(function (a, b) {\r\n                        var c = a[window.variablesJS.sortFieldDefault] !== null ? a[window.variablesJS.sortFieldDefault] : 0;\r\n                        var d = b[window.variablesJS.sortFieldDefault] !== null ? b[window.variablesJS.sortFieldDefault] : 0;\r\n                        if (window.variablesJS.sortFieldType === \"desc\") {\r\n                            return d - c;\r\n                        }\r\n                        return c-d;\r\n                    });\r\n                    contents = \"\";\r\n                    for (let i = 0; i < response.length; i++) {\r\n                        var item = response[i] !== null ? response[i] : null;\r\n                        if (item) {\r\n                            var day = item.changePercent1D !== -99999999999 ? `${(item.changePercent1D).toFixed(2)}` : \"0\";\r\n                            var week = item.changePercent1W !== -99999999999 ? (item.changePercent1W).toFixed(2) : \"N/A\";\r\n                            var month_1 = item.changePercent1M !== -99999999999 ? (item.changePercent1M).toFixed(2) : \"N/A\";\r\n                            var month_3 = item.changePercent3M !== -99999999999 ? (item.changePercent3M).toFixed(2) : \"N/A\";\r\n                            var month_6 = item.changePercent6M !== -99999999999 ? (item.changePercent6M).toFixed(2) : \"N/A\";\r\n                            var ytd = item.changePercentYTD !== -99999999999 ? (item.changePercentYTD).toFixed(2) : \"N/A\";\r\n                            var year = item.changePercent1Y !== -99999999999 ? (item.changePercent1Y).toFixed(2) : \"N/A\";\r\n                            contents += `<tr class=\"append-field-data tr-cursor\" onclick=\"window.commonJS.showTickerInfor('${item.symbol}')\" style=\"background-color: #f0f8ffb0;\">\r\n                                            <td class=\"bold-text\">${item.symbol}</td>\r\n                                            <td colspan=\"6\" class=\"text-left\">${item.name}</td>\r\n                                            <td class=\"${day > 0 ? 'up' : day < 0 ? 'down' : 'reference'} bold\">${day}%</td>\r\n                                            <td class=\"${week > 0 ? 'up' : week < 0 ? 'down' : 'reference'} bold\">${week}%</td>\r\n                                            <td class=\"${month_1 > 0 ? 'up' : month_1 < 0 ? 'down' : 'reference'} bold\">${month_1}%</td>\r\n                                            <td class=\"${month_3 > 0 ? 'up' : month_3 < 0 ? 'down' : 'reference'} bold\">${month_3}%</td>\r\n                                            <td class=\"${month_6 > 0 ? 'up' : month_6 < 0 ? 'down' : 'reference'} bold\">${month_6}%</td>\r\n                                            <td class=\"${year > 0 ? 'up' : year < 0 ? 'down' : 'reference'} bold\">${year}%</td>\r\n                                            <td class=\"${ytd > 0 ? 'up' : ytd < 0 ? 'down' : 'reference'} bold\">${ytd}%</td>\r\n                                        </tr>`;\r\n                        }                \r\n                    }\r\n                    $(\".append-field-data\").remove();\r\n                    $(self).after(contents);\r\n                } else {\r\n                    $(\".append-field-data\").remove();\r\n                }\r\n            }).fail(function (jqXHR, textStatus, error) {\r\n                $(\".append-field-data\").remove();\r\n            });\r\n    \r\n        } else {\r\n            $(\".append-field-data\").remove();\r\n            tdFirstChild.removeClass(\"desc\");\r\n            tdFirstChild.addClass(\"arrow-right\");\r\n            $(self).attr(\"action\", \"collapsed\");\r\n        }\r\n        self.scrollIntoView(true);\r\n    },\r\n    \r\n    resetFieldExpendIcon : function () {\r\n        $(\".filter-sort\").find(\"span:eq(0)\").removeClass(\"desc\");\r\n        $(\".filter-sort\").find(\"span:eq(0)\").addClass(\"arrow-right\");\r\n    },\r\n    \r\n    processFielDetailData : function (icbCode) {\r\n        $(\"#detailModalContent\").html(`</br>${window.commonJS.getLoadingHTML()}`);\r\n        var contents = `<table class=\"table table-bordered table-responsive\">\r\n                                <thead class=\"table-light\">\r\n                                    <tr><th>#</th><th>Mã</th><th>Tên Doanh Nghiệp</th><th>1 Tuần</th><th>2 Tuần</th><th>1 Tháng</th><th>3 Tháng</th><th>6 Tháng</th><th>YTD</th><th>1 Năm</th><th>3 Năm</th></tr>              \r\n                                </thead>\r\n                                <tbody>`;\r\n        setTimeout(() => {\r\n            var symbols = window.stockData.filter(x => x.icbCode === icbCode);\r\n            if (symbols && symbols.length > 0) {\r\n                for (let index = 0; index < symbols.length; index++) {\r\n                    contents += `<tr>\r\n                                    <td>${index + 1}</td>                \r\n                                    <td class=\"top10 bold\">${symbols[index].symbol}</td>\r\n                                    <td class=\"text-left\">${symbols[index].name}</td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                </tr>`;\r\n                    \r\n                }\r\n            } else {\r\n                contents += `<tr><td colspan=\"11\">Không có dữ liệu. Vui lòng thử lại sau!</td></tr>`;\r\n            }\r\n            contents += `<tbody></table>`;\r\n            $(\"#detailModalContent\").html(contents);\r\n        }, 100);\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function(e) { \r\n    window.fieldsJS.refreshFieldsData();\r\n});\r\n\r\n\n\n//# sourceURL=webpack:///./src/js/fields.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/js/fields.js"]();
/******/ 	
/******/ })()
;