window.filtersJS={setValueSlider:function(e){var i=e.attr("data-id"),t=Number($("#"+i+"MinValue").val().replaceAll(".","")),l=Number($("#"+i+"MaxValue").val().replaceAll(".",""));$("#"+i).slider("setValue",[t,l])},clearTimers:function(){window.variablesJS.timeout&&clearTimeout(window.variablesJS.timeout),window.variablesJS.interval&&clearInterval(window.variablesJS.interval)},incrementValue:function(e,i){e.val(new Intl.NumberFormat("de-DE").format(Number(i)+1))},decrementValue:function(e,i){e.val(new Intl.NumberFormat("de-DE").format(Number(i)-1))},getMinMaxValue:function(e,i){if(!e)return{};var t=e.split(",").map((e=>Number(e)));return i?{min:null!==t[0]?t[0]/100:0,max:null!==t[1]?t[1]/100:0}:{min:null!==t[0]?t[0]:0,max:null!==t[1]?t[1]:0}},filterData:function(){var e=window.commonJS.getLoadingHTML(),i=[],t=$("#btnFilterHSXOption:checked").val(),l=$("#btnFilterHNXOption:checked").val(),a=$("#btnFilterUPCOption:checked").val();t&&i.push(t),l&&i.push(l),a&&i.push(a);var n=$("#fields-selection-options").val(),r={};window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionC[0].id)>-1&&(r.NetSale_Growth_MRQ=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionC).val(),!0)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionC1[0].id)>-1&&(r.Profit_Growth_MRQ=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionC1).val(),!0)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionC2[0].id)>-1&&(r.Profit_Growth_MRQ_2=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionC2).val(),!0)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionC3[0].id)>-1&&(r.Profit_Growth_TTM=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionC3).val(),!0)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionA[0].id)>-1&&(r.Eps_TTM=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionA).val(),!1)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionA1[0].id)>-1&&(r.ME_ROE=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionA1).val(),!0)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionA2[0].id)>-1&&(r.NetSale_Growth_Avg_3Y=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionA2).val(),!0)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionA3[0].id)>-1&&(r.Profit_Growth_Avg_3Y=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionA3).val(),!0)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionS[0].id)>-1&&(r.AvgVol3M=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionS).val(),!1)),window.variablesJS.arrFilterIds.indexOf(window.variablesJS.filterOptionL[0].id)>-1&&(r.RS52W=window.filtersJS.getMinMaxValue($(window.variablesJS.filterOptionL).val(),!1));var o=$("#btnFilterMACDUpOption:checked").val(),s=$("#btnFilterMACDDownOption:checked").val(),d=$("#btnFilterRSIOverBuyOption:checked").val(),w=$("#btnFilterRSIOverSellOption:checked").val(),f=$("#btnFilterBollingerUpperBandOption:checked").val(),c=$("#btnFilterBollingerLowerBandOption:checked").val(),u=(c=$("#btnFilterBollingerLowerBandOption:checked").val(),{filterByKeys:[],filterByKeyAndValues:{},compareResultOfTwoSMAs:null}),v=[];o&&v.push(o),s&&v.push(s),d&&v.push(d),w&&v.push(w),f&&v.push(f),c&&v.push(c),u.filterByKeys=v;var p={AvailableForFASearching:!0,Has5ConsecutiveTradingDays:!0},m=$("#btnFilterOverTop:checked").val();m&&(p[m]=!0);var b={faFilter:r,taFilter:u,booleanFilter:p,pageNumber:1,pageSize:1e4,exchanges:i,icbCodes:"null"!==n?[n]:null,sortColumn:"Symbol",isDesc:!1};$("#showFiltersData").html(`</br>${e}`),setTimeout((()=>{var e=window.variablesJS.headFiltersData;$.ajax({url:`${window.apiUrlDefined.STOCK_FILTERS_URL}`,method:"POST",data:JSON.stringify(b),headers:{"content-type":"application/json;charset=UTF-8"}}).done((function(i){if(i&&i.length>0){var t=i.map((e=>e.symbol));(t=window.filtersJS.getTickerCode(t)).length>0?window.variablesJS.filtersDataJson=i.filter((e=>t.indexOf(e.symbol)>-1)):window.variablesJS.filtersDataJson=[],e+=window.filtersJS.processFiltersDataInput("changePercent1D","desc")}else e+='<tr><td colspan="12" class="bold-text">Không có mã nào thỏa mãn tiêu chí.</td></tr>';e+="</tbody></table>",$("#showFiltersData").html(e),window.commonJS.initTooltips()})).fail((function(e,i,t){$("#showFiltersData").html("Có lỗi khi tải dữ liệu. Vui lòng thử lại sau!")}))}),100)},processFiltersDataInput:function(e,i){window.variablesJS.sortFiltersDefault=e;var t="";return window.variablesJS.filtersDataJson&&window.variablesJS.filtersDataJson.length>0?(window.variablesJS.filtersDataJson.sort((function(t,l){var a=null!==t[e]?t[e]:0,n=null!==l[e]?l[e]:0;return"desc"===i?n-a:a-n})),index=0,window.variablesJS.filtersDataJson.forEach((e=>{var i=-99999999999!==e.changePercent1D?`${e.changePercent1D.toFixed(2)}`:"0",l=-99999999999!==e.changePercent1W?e.changePercent1W.toFixed(2):"N/A",a=-99999999999!==e.changePercent1M?e.changePercent1M.toFixed(2):"N/A",n=-99999999999!==e.changePercent3M?e.changePercent3M.toFixed(2):"N/A",r=-99999999999!==e.changePercent6M?e.changePercent6M.toFixed(2):"N/A",o=-99999999999!==e.changePercentYTD?e.changePercentYTD.toFixed(2):"N/A",s=-99999999999!==e.changePercent1Y?e.changePercent1Y.toFixed(2):"N/A",d=-99999999999!==e.changePercent3Yr?e.changePercent3Yr.toFixed(2):"N/A";t+=`<tr class="tr-cursor" onclick=window.commonJS.showTickerInfor("${e.symbol}")>\n                            <td>${index+1}</td>\n                            <td class="bold-text">${e.symbol}</td>\n                            <td class="text-left">${e.name}</td>\n                            <td>${e.exchange}</td>\n                            <td class="${i>0?"up":i<0?"down":"reference"} bold">${i}%</td>\n                            <td class="${l>0?"up":l<0?"down":"reference"} bold">${l}%</td>\n                            <td class="${a>0?"up":a<0?"down":"reference"} bold">${a}%</td>\n                            <td class="${n>0?"up":n<0?"down":"reference"} bold">${n}%</td>\n                            <td class="${r>0?"up":r<0?"down":"reference"} bold">${r}%</td>\n                            <td class="${o>0?"up":o<0?"down":"reference"} bold">${o}%</td>\n                            <td class="${s>0?"up":s<0?"down":"reference"} bold">${s}%</td>\n                            <td class="${d>0?"up":d<0?"down":"reference"} bold">${d}%</td>\n                        </tr>`,index++}))):t+='<tr><td colspan="12" class="bold-text">Không có mã nào thỏa mãn tiêu chí.</td></tr>',t},sortFiltersTable:function(e,i){window.variablesJS.sortFiltersType="desc",$(i).find("span").hasClass("desc")&&(window.variablesJS.sortFiltersType="asc");var t=window.variablesJS.headFiltersData;t+=processFiltersDataInput(e,window.variablesJS.sortFiltersType),t+="</tbody></table>",$("#showFiltersData").html(t),window.commonJS.initTooltips(),window.filtersJS.removeAllSortClass(),$("#"+e).addClass(window.variablesJS.sortFiltersType)},getTickerCode:function(e){var i=$("#btnFilterSelfBusinessOption:checked").val(),t=$("#btnFilterForeignOption:checked").val(),l=$("input[name='btnFiltersPeriodRadio']:checked").val();if(!i&&!t)return e;if(i){var a=window.variablesJS.summaryDataJson.selfBusiness[l][variablesJS.actionSummaryDefault].map((e=>e.ticker));e=e.filter((e=>-1!==a.indexOf(e)))}if(t){var n=window.variablesJS.summaryDataJson.foreign[l][variablesJS.actionSummaryDefault].map((e=>e.ticker));e=e.filter((e=>-1!==n.indexOf(e)))}return e}},document.addEventListener("DOMContentLoaded",(function(e){window.variablesJS.fielsSelections=window.commonJS.getSelectionFieldsHTML("fields-selection-options"),$("#fields-selection").html(window.variablesJS.fielsSelections),window.variablesJS.filterOptionC=$("#filterOptionC").slider({tooltip:"hide",id:"filter-option-c",scale:"logarithmic"}),window.variablesJS.filterOptionC.on("slide slideStop",(function(e){$("#filterOptionCMinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionCMaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionC1=$("#filterOptionC1").slider({tooltip:"hide",id:"filter-option-c1",scale:"logarithmic"}),window.variablesJS.filterOptionC1.on("slide slideStop",(function(e){$("#filterOptionC1MinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionC1MaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionC2=$("#filterOptionC2").slider({tooltip:"hide",id:"filter-option-c2",scale:"logarithmic"}),window.variablesJS.filterOptionC2.on("slide slideStop",(function(e){$("#filterOptionC2MinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionC2MaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionC3=$("#filterOptionC3").slider({tooltip:"hide",id:"filter-option-c3",scale:"logarithmic"}),window.variablesJS.filterOptionC3.on("slide slideStop",(function(e){$("#filterOptionC3MinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionC3MaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionA=$("#filterOptionA").slider({tooltip:"hide",id:"filter-option-a",scale:"logarithmic"}),window.variablesJS.filterOptionA.on("slide slideStop",(function(e){$("#filterOptionAMinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionAMaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionA1=$("#filterOptionA1").slider({tooltip:"hide",id:"filter-option-a1",scale:"logarithmic"}),window.variablesJS.filterOptionA1.on("slide slideStop",(function(e){$("#filterOptionA1MinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionA1MaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionA2=$("#filterOptionA2").slider({tooltip:"hide",id:"filter-option-a2",scale:"logarithmic"}),window.variablesJS.filterOptionA2.on("slide slideStop",(function(e){$("#filterOptionA2MinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionA2MaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionA3=$("#filterOptionA3").slider({tooltip:"hide",id:"filter-option-a3",scale:"logarithmic"}),window.variablesJS.filterOptionA3.on("slide slideStop",(function(e){$("#filterOptionA3MinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionA3MaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionS=$("#filterOptionS").slider({tooltip:"hide",id:"filter-option-s",scale:"logarithmic"}),window.variablesJS.filterOptionS.on("slide",(function(e){$("#filterOptionSMinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionSMaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),window.variablesJS.filterOptionL=$("#filterOptionL").slider({tooltip:"hide",id:"filter-option-l"}),window.variablesJS.filterOptionL.on("slide",(function(e){$("#filterOptionLMinValue").val(new Intl.NumberFormat("de-DE").format(e.value[0])),$("#filterOptionLMaxValue").val(new Intl.NumberFormat("de-DE").format(e.value[1]))})),$(".ckFilter").change((function(){var e=$(this),i=e.val(),t=window.variablesJS.arrFilterIds.indexOf(i);t>-1?window.variablesJS.arrFilterIds.splice(t,1):window.variablesJS.arrFilterIds.push(i),e.prop("checked")?(e.closest("div").next("span").removeClass("filter-title-default"),e.closest("div").next("span").addClass("filter-title")):(e.closest("div").next("span").removeClass("filter-title"),e.closest("div").next("span").addClass("filter-title-default"))})),$(".btn-addition").mousedown((function(){var e=$(this),i=e.next(".filter-values").val().replaceAll(".",""),t=e.attr("data-id"),l=$("#"+t).data("sliderMax");Number(i)+1>l?window.filtersJS.clearTimers():(window.filtersJS.incrementValue(e.next(".filter-values"),i),window.variablesJS.timeout=setTimeout((function(){window.variablesJS.interval=setInterval((function(){i=e.next(".filter-values").val().replaceAll(".",""),l=$("#"+t).data("sliderMax"),Number(i)+1>l?window.filtersJS.clearTimers():window.filtersJS.incrementValue(e.next(".filter-values"),i)}),50)}),300))})),$(".btn-subtraction").mousedown((function(){var e=$(this),i=e.prev(".filter-values").val().replaceAll(".",""),t=e.attr("data-id"),l=$("#"+t).data("sliderMin");Number(i)-1<l?window.filtersJS.clearTimers():(window.filtersJS.decrementValue(e.prev(".filter-values"),i),window.variablesJS.timeout=setTimeout((function(){window.variablesJS.interval=setInterval((function(){i=e.prev(".filter-values").val().replaceAll(".",""),l=$("#"+t).data("sliderMin"),Number(i)-1<l?window.filtersJS.clearTimers():window.filtersJS.decrementValue(e.prev(".filter-values"),i)}),50)}),300))})),$(".btn-addition").on("mouseup",(function(){window.filtersJS.setValueSlider($(this)),window.filtersJS.clearTimers()})),$(".btn-subtraction").on("mouseup",(function(){window.filtersJS.setValueSlider($(this)),window.filtersJS.clearTimers()}))}));