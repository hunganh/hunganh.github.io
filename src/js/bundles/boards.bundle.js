window.boardsJS={loadLiveBoardData:function(){var t=window.commonJS.getLoadingHTML();$("#showLoadingLiveBoard").html(t),setTimeout((()=>{window.boardsJS.getListOfSymbols()}),50)},getListOfSymbols:function(){$.ajax({url:`${window.apiUrlDefined.STOCK_LIVE_BOARD_URL}`,method:"GET",async:!1}).done((function(t){if(t){var o=$("#selectionSymbolsLiveBoard").val(),e=$("input[name='btnStatisticsPeriodLiveBoardRadio']:checked").val(),i=t[o][e];i&&i.length>0&&("bothNetBuy"!==o&&(i=i.slice(0,20)),window.webSocketConfigs.liveboard.listStock=i,window.boardsJS.getListStockOfLiveBoardData(i.toString(),!1),1!==window.webSocketConfigs.liveboard.Result?setTimeout((()=>{window.webSocketApp.initWebsocket()}),30):window.webSocketConfigs.liveboard.Socket&&(window.webSocketActions.socketCurrentUnRegister(),window.webSocketActions.messageRegister()))}else $("#stock-price-table-body").html('<tr><td colspan="31" class="bold-text">Không có dữ liệu. Vui lòng thử lại sau!</td></tr>')})).fail((function(t,o,e){$("#stock-price-table-body").html('<tr><td colspan="31" class="bold-text">Không có dữ liệu. Vui lòng thử lại sau!</td></tr>'),$("#showLoadingLiveBoard").html("")}))},getListStockOfLiveBoardData:function(t,o){$.ajax({url:`https://bgapidatafeed.vps.com.vn/getliststockdata/${t}`,method:"GET",async:!1}).done((function(t){var e="";t&&t.length>0?e+=window.boardsJS.processLiveBoardDataInput(t):e+=o?'<tr><td colspan="31" class="bold-text">Không có dữ liệu. Vui lòng thử lại sau!</td></tr>':"",o?$("#stock-price-table-body tr:first").before(e):$("#stock-price-table-body").html(e),window.boardsJS.setLiveBoardTableHeight(),window.boardsJS.fetchTechnicalAnalysisSignal(null)})).fail((function(t,e,i){o||$("#stock-price-table-body").html('<tr><td colspan="31" class="bold-text">Không có dữ liệu. Vui lòng thử lại sau!</td></tr>'),$("#showLoadingLiveBoard").html("")}))},initTableDnD:function(){$("#live-board-price-table").tableDnD({onDragClass:"dragClass"})},fetchTechnicalAnalysisSignal:function(t){var o=window.commonJS.getLoadingHTML();$("#showLoadingLiveBoard").html(o);var e=window.webSocketConfigs.liveboard.listStock.map((t=>{let o={};return o.text=t,o}));t||(t="Daily"),Promise.all([window.commonJS.fetchContentByUrlWithCORSProxy(encodeURIComponent(`${window.apiUrlDefined.FIALDA_API_V1_URL}${window.apiUrlDefined.FIALDA_STOCK_TA_RATINGS_PATH}`),"POST",e)]).then((o=>{if(o&&o.length>0){var e=o[0].result;window.webSocketConfigs.liveboard.listStock.forEach((o=>{var i=`#${o}_TB`,r=`#${o}_GD`,l=`#${o}_XH`,s=`#${o}_DT`,a=`#${o}_Recommendation`,d=e[o].ratingOverviews[`Overview_DuongTB_${t}`].point_Description,n=e[o].ratingOverviews[`Overview_GiaoDong_${t}`].point_Description,c=e[o].ratingOverviews[`Overview_XuHuong_${t}`].point_Description,w=e[o].ratingOverviews[`Overview_DongTien_${t}`].point_Description,h=e[o].ratingOverviews[`Overview_Tong_${t}`].point_Description,g=`<span class="${window.boardsJS.getSignalColorClass(d)} disable-select">${d}</span>`,S=`<span class="${window.boardsJS.getSignalColorClass(n)} disable-select">${n}</span>`,b=`<span class="${window.boardsJS.getSignalColorClass(c)} disable-select">${c}</span>`,m=`<span class="${window.boardsJS.getSignalColorClass(w)} disable-select">${w}</span>`,u=`<span class="${window.boardsJS.getSignalColorClass(h)} disable-select">${h}</span>`;window.boardsJS.setFlashHighlightSignal(i,d),$(i).html(g),window.boardsJS.setFlashHighlightSignal(r,n),$(r).html(S),window.boardsJS.setFlashHighlightSignal(l,c),$(l).html(b),window.boardsJS.setFlashHighlightSignal(s,w),$(s).html(m),window.boardsJS.setFlashHighlightSignal(a,h),$(a).html(u)})),setTimeout((()=>{window.boardsJS.initTableDnD()}),100)}})).then((()=>{$("#showLoadingLiveBoard").html("")})).catch((t=>{$("#showLoadingLiveBoard").html(""),console.error(t)}))},changePeriodSignalLiveBoard:function(t){window.boardsJS.fetchTechnicalAnalysisSignal(t)},processLiveBoardDataInput:function(t){var o="";return t.forEach((t=>{var e={};for(let o=1;o<=6;o++){var i=t[`g${o}`].split("|");e["p"+o]=i[0],e["v"+o]=i[1]}o+=`<tr class="price-item stock tr-drag-cursor" id="${t.sym}_id" data-r=${t.r} data-c=${t.c} data-f=${t.f} onclick="window.commonJS.showTickerInfor('${t.sym}')">\n                        <td id="${t.sym}_symbol" class="symbol symbol-text text-left sticky-td1-left" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.lastPrice)}>${t.sym}</td>\n                        <td id="${t.sym}_r" class="text-yellow high-light-cell text-right sticky-td2-left price-width">${t.r>0?t.r.toFixed(2):""}</td>\n                        <td id="${t.sym}_c" class="text-purple high-light-cell text-right sticky-td3-left price-width">${t.c>0?t.c.toFixed(2):""}</td>\n                        <td id="${t.sym}_f" class="text-blue high-light-cell text-right sticky-td4-left price-width">${t.f>0?t.f.toFixed(2):""}</td>\n                        <td id="${t.sym}_TB" class="text-left signal-width"> &nbsp; </td>\n                        <td id="${t.sym}_GD" class="text-left signal-width"> &nbsp; </td>\n                        <td id="${t.sym}_XH" class="text-left signal-width"> &nbsp; </td>\n                        <td id="${t.sym}_DT" class="text-left signal-width"> &nbsp; </td>\n                        <td id="${t.sym}_Recommendation" class="text-left high-light-cell signal-width"> &nbsp; </td>\n                        <td id="${t.sym}_price_3" class="text-right price-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p3))}>${Number(e.p3)>0?e.p3:""}</td>\n                        <td id="${t.sym}_vol_3" class="text-right volume-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p3))} >${window.boardsJS.convertToVolFormat(Number(e.v3))}</td>\n                        <td id="${t.sym}_price_2" class="text-right price-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p2))}>${Number(e.p2)>0?e.p2:""}</td>\n                        <td id="${t.sym}_vol_2" class="text-right volume-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p2))}>${window.boardsJS.convertToVolFormat(e.v2)}</td>\n                        <td id="${t.sym}_price_1" class="text-right price-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p1))}>${Number(e.p1)>0?e.p1:""}</td>\n                        <td id="${t.sym}_vol_1" class="text-right volume-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p1))}>${window.boardsJS.convertToVolFormat(e.v1)}</td>\n                        <td class="high-light-cell text-right price-width" id="${t.sym}_lastPrice" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.lastPrice)}>${t.lastPrice>0?t.lastPrice.toFixed(2).toString():""}</td>\n                        <td class="high-light-cell text-right volume-width" id="${t.sym}_lastVol" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.lastPrice)}>${window.boardsJS.convertToVolFormat(t.lastVolume)}</td>\n                        <td class="high-light-cell text-right percent-width" id="${t.sym}_change" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.lastPrice)}>${t.lastPrice>0?t.lastPrice<t.r?"-".concat(t.ot.toString()):t.ot.toString():""}</td>\n                        <td class="high-light-cell text-right percent-width" id="${t.sym}_changePc" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.lastPrice)}>${t.lastPrice>0?t.lastPrice<t.r?"-".concat(t.changePc.toString()):t.changePc.toString():""}${t.lastPrice>0?"%":""}</td>\n                        <td id="${t.sym}_price_4" class="text-right price-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p4))}>${Number(e.p4)>0?e.p4:""}</td>\n                        <td id="${t.sym}_vol_4" class="text-right volume-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p4))}>${window.boardsJS.convertToVolFormat(e.v4)}</td>\n                        <td id="${t.sym}_price_5" class="text-right price-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p5))}>${Number(e.p5)>0?e.p5:""}</td>\n                        <td id="${t.sym}_vol_5"  class="text-right volume-width"${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p5))}>${window.boardsJS.convertToVolFormat(e.v5)}</td>\n                        <td id="${t.sym}_price_6" class="text-right price-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p6))}>${Number(e.p6)>0?e.p6:""}</td>\n                        <td id="${t.sym}_vol_6" class="text-right volume-width" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,Number(e.p6))}>${window.boardsJS.convertToVolFormat(e.v6)}</td>\n                        <td id="${t.sym}_totalVol" class="col-totalVolume text-right volume-width">${window.boardsJS.convertToVolFormat(t.lot)}</td>\n                        <td class="high-light-cell col-avePrice text-right price-width" id="${t.sym}_avePrice" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.avePrice)}>${t.avePrice>0?t.avePrice.toString():""}</td>\n                        <td class="high-light-cell col-highPrice text-right price-width" id="${t.sym}_highPrice" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.highPrice)}>${t.highPrice>0?t.highPrice.toString():""}</td>\n                        <td class="high-light-cell col-lowPrice text-right price-width" id="${t.sym}_lowPrice" ${window.boardsJS.getColorStyle(t.r,t.c,t.f,t.lowPrice)}>${t.lowPrice>0?t.lowPrice.toString():""}</td>\n                        <td id="${t.sym}_fBVol" class="col-foreign text-right volume-width">${window.boardsJS.convertToVolFormat(t.fBVol)}</td>\n                        <td id="${t.sym}_fSVol" class="col-foreign text-right volume-width">${window.boardsJS.convertToVolFormat(t.fSVolume)}</td>\n                    </tr>`})),o},decodeBoardBaseStock:function(t,o){try{var e=o.hasOwnProperty("sym")?o.sym:o.symbol,i=`#${e}_id`,r=`#${e}_symbol`,l=`#${e}_lastPrice`,s=`#${e}_lastVol`,a=`#${e}_change`,d=`#${e}_changePc`,n=`#${e}_price_6`,c=`#${e}_price_5`,w=`#${e}_price_4`,h=`#${e}_price_3`,g=`#${e}_price_2`,S=`#${e}_price_1`,b=`#${e}_vol_6`,m=`#${e}_vol_5`,u=`#${e}_vol_4`,p=`#${e}_vol_3`,v=`#${e}_vol_2`,f=`#${e}_vol_1`,y=`#${o.sym}_totalVol`,J=`#${e}_highPrice`,_=`#${e}_avePrice`,C=`#${e}_lowPrice`,x=`#${e}_fBVol`,F=`#${e}_fSVol`;if(window.boardsJS.setLiveBoardCommonValueData(o,r,l,s,a,d,J,_,C,y,i),o.hasOwnProperty("side")&&"B"===o.side)(T=o.g1.split("|"))&&T.length>0&&(window.boardsJS.setFlashHighlightBuySell(S,T[0]),$(S).text(Number(T[0])>0||window.boardsJS.checkAtoOrAtcSession(T[0])?T[0]:""),window.boardsJS.setFlashHighlightBuySell(f,window.boardsJS.convertToVolFormat(T[1])),$(f).text(window.boardsJS.convertToVolFormat(T[1])),window.boardsJS.setColorOfElements(i,[S,f],Number(T[0]))),(P=o.g2.split("|"))&&P.length>0&&(window.boardsJS.setFlashHighlightBuySell(g,P[0]),$(g).text(Number(P[0])>0||window.boardsJS.checkAtoOrAtcSession(P[0])?P[0]:""),window.boardsJS.setFlashHighlightBuySell(v,window.boardsJS.convertToVolFormat(P[1])),$(v).text(window.boardsJS.convertToVolFormat(P[1])),window.boardsJS.setColorOfElements(i,[g,v],Number(P[0]))),(B=o.g3.split("|"))&&B.length>0&&(window.boardsJS.setFlashHighlightBuySell(h,B[0]),$(h).text(Number(B[0])>0||window.boardsJS.checkAtoOrAtcSession(B[0])?B[0]:""),window.boardsJS.setFlashHighlightBuySell(p,window.boardsJS.convertToVolFormat(B[1])),$(p).text(window.boardsJS.convertToVolFormat(B[1])),window.boardsJS.setColorOfElements(i,[h,p],Number(B[0])));else if(o.hasOwnProperty("side")&&"S"===o.side){var T,P,B;(T=o.g1.split("|"))&&T.length>0&&(window.boardsJS.setFlashHighlightBuySell(w,T[0]),$(w).text(Number(T[0])>0||window.boardsJS.checkAtoOrAtcSession(T[0])?T[0]:""),window.boardsJS.setFlashHighlightBuySell(u,window.boardsJS.convertToVolFormat(T[1])),$(u).text(window.boardsJS.convertToVolFormat(T[1])),window.boardsJS.setColorOfElements(i,[w,u],Number(T[0]))),(P=o.g2.split("|"))&&P.length>0&&(window.boardsJS.setFlashHighlightBuySell(c,P[0]),$(c).text(Number(P[0])>0||window.boardsJS.checkAtoOrAtcSession(P[0])?P[0]:""),window.boardsJS.setFlashHighlightBuySell(m,window.boardsJS.convertToVolFormat(P[1])),$(m).text(window.boardsJS.convertToVolFormat(P[1])),window.boardsJS.setColorOfElements(i,[c,m],Number(P[0]))),(B=o.g3.split("|"))&&B.length>0&&(window.boardsJS.setFlashHighlightBuySell(n,B[0]),$(n).text(Number(B[0])>0||window.boardsJS.checkAtoOrAtcSession(B[0])?B[0]:""),window.boardsJS.setFlashHighlightBuySell(b,window.boardsJS.convertToVolFormat(B[1])),$(b).text(window.boardsJS.convertToVolFormat(B[1])),window.boardsJS.setColorOfElements(i,[n,b],Number(B[0])))}o.hasOwnProperty("fBVol")&&(window.boardsJS.setFlashHighlightBuySell(x,o.fBVol),$(x).text(window.boardsJS.convertToVolFormat(Number(o.fBVol)))),o.hasOwnProperty("fSVolume")&&(window.boardsJS.setFlashHighlightBuySell(F,o.fSVolume),$(F).text(window.boardsJS.convertToVolFormat(Number(o.fSVolume))))}catch(t){}},setLiveBoardCommonValueData:function(t,o,e,i,r,l,s,a,d,n,c){if(t.hasOwnProperty("lastPrice")){window.boardsJS.setFlashHighlight(e,t.lastPrice.toFixed(2).toString()),$(e).text(t.lastPrice>0?t.lastPrice.toFixed(2).toString():""),window.boardsJS.setFlashHighlight(i,window.boardsJS.convertToVolFormat(t.lastVol)),$(i).text(window.boardsJS.convertToVolFormat(t.lastVol));var w=$(`${c}`).data("r"),h=`${t.lastPrice<w?"-"+t.change.toString():t.change.toString()}`,g=`${t.lastPrice<w?"-"+t.changePc.toString():t.changePc.toString()}`;window.boardsJS.setFlashHighlight(r,h),$(r).text(`${h}`),$(l).text(`${g}%`),window.boardsJS.setColorOfElements(c,[o,e,i,r,l],t.lastPrice)}t.hasOwnProperty("hp")&&(window.boardsJS.setFlashHighlight(s,t.hp.toString()),$(s).text(t.hp>0?t.hp.toString():""),window.boardsJS.setColorOfElements(c,[s],t.hp)),t.hasOwnProperty("ap")&&(window.boardsJS.setFlashHighlight(a,t.ap.toString()),$(a).text(t.ap>0?t.ap.toString():""),window.boardsJS.setColorOfElements(c,[a],t.ap)),t.hasOwnProperty("lp")&&(window.boardsJS.setFlashHighlight(d,t.lp.toString()),$(d).text(t.lp>0?t.lp.toString():""),window.boardsJS.setColorOfElements(c,[d],t.lp)),t.hasOwnProperty("totalVol")&&$(n).text(window.boardsJS.convertToVolFormat(t.totalVol))},setFlashHighlight:function(t,o){if(null!==o&&""!==o&&0!==Number(o)){var e=Number($(t).text()),i=Number(o);$(t).removeClass("highlight-yellow highlight-green highlight-red"),setTimeout((()=>{var o="highlight-yellow";i>e?o="highlight-green":i<e&&(o="highlight-red"),$(t).addClass(o)}),20)}},setFlashHighlightBuySell:function(t,o){var e=Number($(t).text().replaceAll(",",".")),i=Number(o.toString().replaceAll(",","."));$(t).removeClass("highlight-yellow highlight-green highlight-red"),setTimeout((()=>{if(i!==e){var o="highlight-yellow";i>e?o="highlight-green":i<e&&(o="highlight-red"),$(t).addClass(o)}}),20)},setFlashHighlightSignal:function(t,o){var e=$(t).text().toLowerCase(),i=o.toString().toLowerCase();$(t).removeClass("highlight-yellow highlight-green highlight-red"),setTimeout((()=>{if(i!==e){var o=window.boardsJS.getSignalHighlightColorClass(i);$(t).addClass(o)}}),20)},getSignalHighlightColorClass:function(t){return t.toLowerCase().indexOf("mua")>-1?"highlight-green":t.toLowerCase().indexOf("trung")>-1?"highlight-yellow":"highlight-red"},getSignalColorClass:function(t){return t.toLowerCase().indexOf("mua")>-1?"text-lime":t.toLowerCase().indexOf("trung")>-1?"text-gray":"text-red"},setLiveBoardTableHeight:function(){setTimeout((()=>{var t=$("#live-board-table").height(),o=$(window).height()-$("#myTab").height()-$("#headerFixedId").height()-t-$(".footer-info").height();$("#live-board-table").css("max-height",parseInt(t+o-70)+"px")}),200)},setColorOfElements:function(t,o,e){var i=$(`${t}`).data("r"),r=$(`${t}`).data("c"),l=$(`${t}`).data("f");"ATC"===e||"ATO"===e?window.boardsJS.processSetColorByCss(o,"#fbac20"):e===r?window.boardsJS.processSetColorByCss(o,"#e683ff"):e===l?window.boardsJS.processSetColorByCss(o,"#64baff"):e>i?window.boardsJS.processSetColorByCss(o,"rgb(0, 244, 176)"):e<i?window.boardsJS.processSetColorByCss(o,"rgb(255, 55, 71)"):window.boardsJS.processSetColorByCss(o,"#fbac20")},getColorStyle:function(t,o,e,i){return`style="color: ${0===i?"#fbac20":i===o?"#e683ff":i===e?"#64baff":i>t?"rgb(0, 244, 176)":i<t?"rgb(255, 55, 71)":"#fbac20"}"`},processSetColorByCss:function(t,o){t.forEach((t=>{$(t).css("color",o)}))},convertToVolFormat:function(t){if(0==t)return"";var o=new Intl.NumberFormat(window.variablesJS.numberLocale).format(10*t);return o.slice(0,o.length-1)},checkAtoOrAtcSession:function(t){return"atc"===t.toString().toLowerCase()||"ato"===t.toString().toLowerCase()}},document.addEventListener("DOMContentLoaded",(function(t){window.commonJS.initTooltips(),window.webSocketConfigs.liveboard.listStock.length>0&&window.webSocketActions.socketCurrentUnRegister(),window.commonJS.initSymbolAutocomple("symbol-name-autocomplete"),setTimeout((()=>{window.boardsJS.loadLiveBoardData(),$(window).resize((function(){window.boardsJS.setLiveBoardTableHeight()}))}),100),$("#btnAddSymbolLiveBoard").click((function(){var t=$("#symbol-name-autocomplete").val();""!==t&&-1===window.webSocketConfigs.liveboard.listStock.indexOf(t)&&(window.webSocketConfigs.liveboard.listStock.push(t),window.boardsJS.getListStockOfLiveBoardData(t,!0),window.webSocketActions.messageRegisterNewSymbol(t))}))}));